{"ast":null,"code":"var _jsxFileName = \"/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\"; // import { applyCoupon } from \"../actions/userActions\";\n\nimport { listCoupons } from \"../actions/couponActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PlaceOrderScreen(props) {\n  _s();\n\n  const cart = useSelector(state => state.cart);\n  const [coupon, setCoupon] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  console.log(\"inside placeOrder kaka\");\n  console.log(cart); // first check if the payment method has been choosen or not\n\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n\n  const orderCreate = useSelector(state => state.orderCreate);\n  const {\n    loading,\n    success,\n    error,\n    order\n  } = orderCreate;\n  const couponList = useSelector(state => state.couponList);\n  const {\n    loading: loaddingCoupon,\n    error: errorCoupon,\n    coupons\n  } = couponList;\n  console.log(\"what is this kaka\");\n  console.log(coupons); //   console.log(\"this is coupon name \", coupon);\n  //   console.log(typeof coupon);\n  //   console.log(error);\n\n  const toPrice = num => Number(num.toFixed(2)); // to round the number 5.123 =>\"5.12\" => 5.12\n\n\n  cart.itemsPrice = toPrice(cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0));\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice); //   cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  //   cart.totalPrice = discount\n  //     ? cart.itemsPrice +\n  //       cart.shippingPrice +\n  //       cart.taxPrice -\n  //       cart.totalPrice * discount * 0.01\n  //     : cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // console.log(\"see you in the next session\")\n    // all items of cart and changing cartItems name to orederItems\n    dispatch(createOrder({ ...cart,\n      orderItems: cart.cartItems\n    }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({\n        type: ORDER_CREATE_RESET\n      });\n    }\n  }, [dispatch, order, props.history, success]);\n\n  const couponHandler = () => {\n    console.log(\"bringing coupons to here \");\n    console.log(coupons);\n    dispatch(listCoupons({}));\n    const xx = coupons.filter(x => x.name === coupon);\n    console.log(\"xx\"); // setDiscount(xx[0].discount);\n    // xx.length === 0\n    //   ? alert(\"your coupon number is wrong\")\n    //   : setDiscount(xx[0].discount);\n\n    if (xx.length === 0) {\n      alert(\"your coupon number is wrong\");\n    } else {\n      setDiscount(xx[0].discount);\n    } // console.log(\"naw filter bram\");\n    // console.log(xx);\n\n  };\n\n  console.log(\"discount\");\n  console.log(discount);\n  cart.totalPrice = discount ? cart.itemsPrice + cart.shippingPrice + cart.taxPrice - cart.totalPrice * discount * 0.01 : cart.itemsPrice + cart.shippingPrice + cart.taxPrice; // applyCo;pon(coupon).then((res) => {\n  //   console.log(\"RES ON COUPON APPLIED\", res.data);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n      step1: true,\n      step2: true,\n      step3: true,\n      step4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this), cart.shippingAddress.fullName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 51\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Address:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 19\n                }, this), cart.shippingAddress.address, \",\", cart.shippingAddress.city, \",\", \" \", cart.shippingAddress.postalCode, \",\", cart.shippingAddress.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Payment method\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Method:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this), cart.paymentMethod]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: cart.cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.image,\n                        alt: item.name,\n                        className: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"min-30\",\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/product/${item.product}`,\n                        children: item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [item.qty, \" x $\", item.price, \" = $\", item.qty * item.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 23\n                  }, this)\n                }, item.product, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Summery\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.itemsPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.shippingPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Tax\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.taxPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h7\", {\n                children: \"coupon?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: e => setCoupon(e.target.value.toString()),\n                  value: coupon,\n                  placeholder: \"add here if you have coupon number\",\n                  type: \"text\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: couponHandler,\n                  className: \"btn btn-primary mt-2\",\n                  children: \"Apply to get discount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Order Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"$\", cart.totalPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"pushDown\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: placeOrderHandler,\n                className: \"primary block pushDown\",\n                disabled: cart.cartItems.length === 0,\n                children: \"Place Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), loading && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 27\n            }, this), error && /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"danger\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PlaceOrderScreen, \"ijWyy89LVjQ8L53wq11PBJ1Mdws=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = PlaceOrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceOrderScreen\");","map":{"version":3,"sources":["/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","listCoupons","PlaceOrderScreen","props","cart","state","coupon","setCoupon","discount","setDiscount","console","log","paymentMethod","history","push","orderCreate","loading","success","error","order","couponList","loaddingCoupon","errorCoupon","coupons","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","dispatch","placeOrderHandler","orderItems","_id","type","couponHandler","xx","filter","x","name","length","alert","totalPrice","shippingAddress","fullName","address","city","postalCode","country","map","item","image","product","e","target","value","toString"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,SAASC,kBAAT,QAAmC,6BAAnC;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,UAAP,MAAuB,0BAAvB,C,CACA;;AACA,SAASC,WAAT,QAA4B,0BAA5B;;;AAEA,eAAe,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAAA;;AAC9C,QAAMC,IAAI,GAAGV,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACA,QAAM,CAACE,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,EAAD,CAAxC;AACAkB,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ,EAL8C,CAO9C;;AACA,MAAI,CAACA,IAAI,CAACQ,aAAV,EAAyB;AACvBT,IAAAA,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAmB,UAAnB;AACD;;AAED,QAAMC,WAAW,GAAGrB,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACU,WAAlB,CAA/B;AACA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,OAAX;AAAoBC,IAAAA,KAApB;AAA2BC,IAAAA;AAA3B,MAAqCJ,WAA3C;AAEA,QAAMK,UAAU,GAAG1B,WAAW,CAAEW,KAAD,IAAWA,KAAK,CAACe,UAAlB,CAA9B;AACA,QAAM;AAAEJ,IAAAA,OAAO,EAAEK,cAAX;AAA2BH,IAAAA,KAAK,EAAEI,WAAlC;AAA+CC,IAAAA;AAA/C,MAA2DH,UAAjE;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYY,OAAZ,EAlB8C,CAmB9C;AACA;AAEA;;AAEA,QAAMC,OAAO,GAAIC,GAAD,IAASC,MAAM,CAACD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAD,CAA/B,CAxB8C,CAwBG;;;AACjDvB,EAAAA,IAAI,CAACwB,UAAL,GAAkBJ,OAAO,CACvBpB,IAAI,CAACyB,SAAL,CAAeC,MAAf,CAAsB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAAC,CAACC,GAAF,GAAQD,CAAC,CAACE,KAA9C,EAAqD,CAArD,CADuB,CAAzB;AAIA9B,EAAAA,IAAI,CAAC+B,aAAL,GAAqB/B,IAAI,CAACwB,UAAL,GAAkB,GAAlB,GAAwBJ,OAAO,CAAC,CAAD,CAA/B,GAAqCA,OAAO,CAAC,EAAD,CAAjE;AAEApB,EAAAA,IAAI,CAACgC,QAAL,GAAgBZ,OAAO,CAAC,OAAOpB,IAAI,CAACwB,UAAb,CAAvB,CA/B8C,CAgC9C;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMS,QAAQ,GAAG5C,WAAW,EAA5B;;AAEA,QAAM6C,iBAAiB,GAAG,MAAM;AAC9B;AACA;AACAD,IAAAA,QAAQ,CAACzC,WAAW,CAAC,EAAE,GAAGQ,IAAL;AAAWmC,MAAAA,UAAU,EAAEnC,IAAI,CAACyB;AAA5B,KAAD,CAAZ,CAAR;AACD,GAJD;;AAMAtC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI0B,OAAJ,EAAa;AACXd,MAAAA,KAAK,CAACU,OAAN,CAAcC,IAAd,CAAoB,UAASK,KAAK,CAACqB,GAAI,EAAvC;AACAH,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAE3C;AAAR,OAAD,CAAR;AACD;AACF,GALQ,EAKN,CAACuC,QAAD,EAAWlB,KAAX,EAAkBhB,KAAK,CAACU,OAAxB,EAAiCI,OAAjC,CALM,CAAT;;AAOA,QAAMyB,aAAa,GAAG,MAAM;AAC1BhC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYY,OAAZ;AACAc,IAAAA,QAAQ,CAACpC,WAAW,CAAC,EAAD,CAAZ,CAAR;AACA,UAAM0C,EAAE,GAAGpB,OAAO,CAACqB,MAAR,CAAgBC,CAAD,IAAOA,CAAC,CAACC,IAAF,KAAWxC,MAAjC,CAAX;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAL0B,CAM1B;AACA;AACA;AACA;;AACA,QAAIgC,EAAE,CAACI,MAAH,KAAc,CAAlB,EAAqB;AACnBC,MAAAA,KAAK,CAAC,6BAAD,CAAL;AACD,KAFD,MAEO;AACLvC,MAAAA,WAAW,CAACkC,EAAE,CAAC,CAAD,CAAF,CAAMnC,QAAP,CAAX;AACD,KAdyB,CAgB1B;AACA;;AACD,GAlBD;;AAmBAE,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AAEAJ,EAAAA,IAAI,CAAC6C,UAAL,GAAkBzC,QAAQ,GACtBJ,IAAI,CAACwB,UAAL,GACAxB,IAAI,CAAC+B,aADL,GAEA/B,IAAI,CAACgC,QAFL,GAGAhC,IAAI,CAAC6C,UAAL,GAAkBzC,QAAlB,GAA6B,IAJP,GAKtBJ,IAAI,CAACwB,UAAL,GAAkBxB,IAAI,CAAC+B,aAAvB,GAAuC/B,IAAI,CAACgC,QALhD,CA9E8C,CAqF9C;AACA;;AAEA,sBACE;AAAA,4BACE,QAAC,aAAD;AAAe,MAAA,KAAK,MAApB;AAAqB,MAAA,KAAK,MAA1B;AAA2B,MAAA,KAAK,MAAhC;AAAiC,MAAA,KAAK;AAAtC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,+BACE;AAAA,kCACE;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGhC,IAAI,CAAC8C,eAAL,CAAqBC,QAFxB,oBAEkC;AAAA;AAAA;AAAA;AAAA,wBAFlC,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,EAIG/C,IAAI,CAAC8C,eAAL,CAAqBE,OAJxB,OAIkChD,IAAI,CAAC8C,eAAL,CAAqBG,IAJvD,OAI8D,GAJ9D,EAKGjD,IAAI,CAAC8C,eAAL,CAAqBI,UALxB,OAMGlD,IAAI,CAAC8C,eAAL,CAAqBK,OANxB;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAeE;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGnD,IAAI,CAACQ,aAFR;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAfF,eAyBE;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,0BACGR,IAAI,CAACyB,SAAL,CAAe2B,GAAf,CAAoBC,IAAD,iBAClB;AAAA,yCACE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,4CACE;AAAA,6CACE;AACE,wBAAA,GAAG,EAAEA,IAAI,CAACC,KADZ;AAEE,wBAAA,GAAG,EAAED,IAAI,CAACX,IAFZ;AAGE,wBAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BADF,eAQE;AAAK,sBAAA,SAAS,EAAC,QAAf;AAAA,6CACE,QAAC,IAAD;AAAM,wBAAA,EAAE,EAAG,YAAWW,IAAI,CAACE,OAAQ,EAAnC;AAAA,kCACGF,IAAI,CAACX;AADR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BARF,eAcE;AAAA,iCACGW,IAAI,CAACxB,GADR,UACiBwB,IAAI,CAACvB,KADtB,UACiCuB,IAAI,CAACxB,GAAL,GAAWwB,IAAI,CAACvB,KADjD;AAAA;AAAA;AAAA;AAAA;AAAA,4BAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBAASuB,IAAI,CAACE,OAAd;AAAA;AAAA;AAAA;AAAA,wBADD;AADH;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eA2DE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,iCACE;AAAA,oCACE;AAAA,qCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAKE;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,kCAAOvD,IAAI,CAACwB,UAAL,CAAgBD,OAAhB,CAAwB,CAAxB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBALF,eAYE;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,kCAAOvB,IAAI,CAAC+B,aAAL,CAAmBR,OAAnB,CAA2B,CAA3B,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAZF,eAmBE;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,kCAAOvB,IAAI,CAACgC,QAAL,CAAcT,OAAd,CAAsB,CAAtB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAnBF,eA0BE;AAAA,sCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,wCACE;AACE,kBAAA,QAAQ,EAAGiC,CAAD,IAAOrD,SAAS,CAACqD,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,QAAf,EAAD,CAD5B;AAEE,kBAAA,KAAK,EAAEzD,MAFT;AAGE,kBAAA,WAAW,EAAC,oCAHd;AAIE,kBAAA,IAAI,EAAC,MAJP;AAKE,kBAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA,wBADF,eAQE;AACE,kBAAA,OAAO,EAAEoC,aADX;AAEE,kBAAA,SAAS,EAAC,sBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1BF,eA6CE;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCACE;AAAA,yCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAA,yCACE;AAAA,oCAAUtC,IAAI,CAAC6C,UAAL,CAAgBtB,OAAhB,CAAwB,CAAxB,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA7CF,eAwDE;AAAI,cAAA,SAAS,EAAC,UAAd;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,OAAO,EAAEW,iBAFX;AAGE,gBAAA,SAAS,EAAC,wBAHZ;AAIE,gBAAA,QAAQ,EAAElC,IAAI,CAACyB,SAAL,CAAekB,MAAf,KAA0B,CAJtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAxDF,EAkEG/B,OAAO,iBAAI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,oBAlEd,EAmEGE,KAAK,iBAAI,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,QAApB;AAAA,wBAA8BA;AAA9B;AAAA;AAAA;AAAA;AAAA,oBAnEZ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cA3DF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA0ID;;GAlOuBhB,gB;UACTR,W,EAWOA,W,EAGDA,W,EA0BFD,W;;;KAzCKS,gB","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\n// import { applyCoupon } from \"../actions/userActions\";\nimport { listCoupons } from \"../actions/couponActions\";\n\nexport default function PlaceOrderScreen(props) {\n  const cart = useSelector((state) => state.cart);\n  const [coupon, setCoupon] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  console.log(\"inside placeOrder kaka\");\n  console.log(cart);\n\n  // first check if the payment method has been choosen or not\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n\n  const orderCreate = useSelector((state) => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n\n  const couponList = useSelector((state) => state.couponList);\n  const { loading: loaddingCoupon, error: errorCoupon, coupons } = couponList;\n  console.log(\"what is this kaka\");\n  console.log(coupons);\n  //   console.log(\"this is coupon name \", coupon);\n  //   console.log(typeof coupon);\n\n  //   console.log(error);\n\n  const toPrice = (num) => Number(num.toFixed(2)); // to round the number 5.123 =>\"5.12\" => 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  //   cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n\n  //   cart.totalPrice = discount\n  //     ? cart.itemsPrice +\n  //       cart.shippingPrice +\n  //       cart.taxPrice -\n  //       cart.totalPrice * discount * 0.01\n  //     : cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // console.log(\"see you in the next session\")\n    // all items of cart and changing cartItems name to orederItems\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({ type: ORDER_CREATE_RESET });\n    }\n  }, [dispatch, order, props.history, success]);\n\n  const couponHandler = () => {\n    console.log(\"bringing coupons to here \");\n    console.log(coupons);\n    dispatch(listCoupons({}));\n    const xx = coupons.filter((x) => x.name === coupon);\n    console.log(\"xx\");\n    // setDiscount(xx[0].discount);\n    // xx.length === 0\n    //   ? alert(\"your coupon number is wrong\")\n    //   : setDiscount(xx[0].discount);\n    if (xx.length === 0) {\n      alert(\"your coupon number is wrong\");\n    } else {\n      setDiscount(xx[0].discount);\n    }\n\n    // console.log(\"naw filter bram\");\n    // console.log(xx);\n  };\n  console.log(\"discount\");\n  console.log(discount);\n\n  cart.totalPrice = discount\n    ? cart.itemsPrice +\n      cart.shippingPrice +\n      cart.taxPrice -\n      cart.totalPrice * discount * 0.01\n    : cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  // applyCo;pon(coupon).then((res) => {\n  //   console.log(\"RES ON COUPON APPLIED\", res.data);\n\n  return (\n    <div>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"row top\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Shipping</h2>\n                <p>\n                  <strong>Name:</strong>\n                  {cart.shippingAddress.fullName} <br />\n                  <strong>Address:</strong>\n                  {cart.shippingAddress.address},{cart.shippingAddress.city},{\" \"}\n                  {cart.shippingAddress.postalCode},\n                  {cart.shippingAddress.country}\n                </p>\n              </div>\n            </li>\n\n            <li>\n              <div className=\"card card-body\">\n                <h2>Payment method</h2>\n                <p>\n                  <strong>Method:</strong>\n                  {cart.paymentMethod}\n                </p>\n              </div>\n            </li>\n\n            <li>\n              <div className=\"card card-body\">\n                <h2>Order Items</h2>\n                <ul>\n                  {cart.cartItems.map((item) => (\n                    <li key={item.product}>\n                      <div className=\"row\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n\n                        <div>\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>Order Summery</h2>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>Items</div>\n                  <div>${cart.itemsPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>Shipping</div>\n                  <div>${cart.shippingPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>Tax</div>\n                  <div>${cart.taxPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <h7>coupon?</h7>\n                <>\n                  <input\n                    onChange={(e) => setCoupon(e.target.value.toString())}\n                    value={coupon}\n                    placeholder=\"add here if you have coupon number\"\n                    type=\"text\"\n                    className=\"form-control\"\n                  ></input>\n                  <button\n                    onClick={couponHandler}\n                    className=\"btn btn-primary mt-2\"\n                  >\n                    Apply to get discount\n                  </button>\n                </>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>\n                    <strong>Order Total</strong>\n                  </div>\n                  <div>\n                    <strong>${cart.totalPrice.toFixed(2)}</strong>\n                  </div>\n                </div>\n              </li>\n\n              <li className=\"pushDown\">\n                <button\n                  type=\"button\"\n                  onClick={placeOrderHandler}\n                  className=\"primary block pushDown\"\n                  disabled={cart.cartItems.length === 0}\n                >\n                  Place Order\n                </button>\n              </li>\n              {loading && <LoadingBox></LoadingBox>}\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}