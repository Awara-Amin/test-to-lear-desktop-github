{"ast":null,"code":"import _objectSpread from \"/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nexport default function PlaceOrderScreen(props) {\n  var _this = this;\n\n  var cart = useSelector(function (state) {\n    return state.cart;\n  }); // first check if the payment method has been choosen or not\n\n  if (!cart.paymentMethod) {\n    props.history.push('/payment');\n  }\n\n  var orderCreate = useSelector(function (state) {\n    return state.orderCreate;\n  });\n  var loading = orderCreate.loading,\n      success = orderCreate.success,\n      error = orderCreate.error,\n      order = orderCreate.order;\n  console.log(error);\n\n  var toPrice = function toPrice(num) {\n    return Number(num.toFixed(2));\n  }; // to round the number 5.123 =>\"5.12\" => 5.12\n\n\n  cart.itemsPrice = toPrice(cart.cartItems.reduce(function (a, c) {\n    return a + c.qty * c.price;\n  }, 0));\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n  var dispatch = useDispatch();\n\n  var placeOrderHandler = function placeOrderHandler() {\n    // console.log(\"see you in the next session\")\n    // all items of cart and changing cartItems name to orederItems\n    dispatch(createOrder(_objectSpread({}, cart, {\n      orderItems: cart.cartItems\n    })));\n  };\n\n  useEffect(function () {\n    if (success) {\n      props.history.push(\"/order/\".concat(order._id));\n      dispatch({\n        type: ORDER_CREATE_RESET\n      });\n    }\n  }, [dispatch, order, props.history, success]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    step3: true,\n    step4: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 33\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 37\n    }\n  }, \"Name:\"), cart.shippingAddress.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 91\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 37\n    }\n  }, \"Address:\"), cart.shippingAddress.address, \",\", cart.shippingAddress.city, \", \", cart.shippingAddress.postalCode, \",\", cart.shippingAddress.country))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, \"Payment method\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }, \"Method:\"), cart.paymentMethod))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Order Items\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 36\n    }\n  }, cart.cartItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: item.product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.image,\n      alt: item.name,\n      className: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 57\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"min-30\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.product),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 57\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 53\n      }\n    }, item.qty, \" x  $\", item.price, \" = $\", item.qty * item.price)));\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 33\n    }\n  }, \"Order Summery\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 37\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }, \"$\", cart.itemsPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 37\n    }\n  }, \"$\", cart.shippingPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 37\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 37\n    }\n  }, \"$\", cart.taxPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 41\n    }\n  }, \"Order Total\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 42\n    }\n  }, \"$\", cart.totalPrice.toFixed(2))))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: placeOrderHandler,\n    className: \"primary block\",\n    disabled: cart.cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, \"Place Order\")), loading && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 41\n    }\n  }), error && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 39\n    }\n  }, error))))));\n}","map":{"version":3,"sources":["/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","console","log","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalCode","country","map","item","product","image","name","length"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {Link} from \"react-router-dom\";\nimport { createOrder } from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\n\nexport default function PlaceOrderScreen(props) {\n    const cart = useSelector((state) => state.cart);\n    \n    // first check if the payment method has been choosen or not\n    if (!cart.paymentMethod) {\n        props.history.push('/payment');\n      }\n\n   const orderCreate = useSelector((state) => state.orderCreate);\n   const { loading, success, error, order } = orderCreate;\n   console.log(error);\n\n\n    const toPrice = (num) => Number(num.toFixed(2)); // to round the number 5.123 =>\"5.12\" => 5.12\n    cart.itemsPrice = toPrice (\n    cart.cartItems.reduce((a , c) => a + c.qty * c.price, 0)\n    );\n\n    cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0): toPrice(10);\n    \n    cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n    \n    cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n    const dispatch = useDispatch();\n\n    const placeOrderHandler = () => {\n        // console.log(\"see you in the next session\")\n        // all items of cart and changing cartItems name to orederItems\n        dispatch(createOrder({...cart, orderItems: cart.cartItems}));\n    };\n\n    useEffect(() => {\n        if (success) {\n          props.history.push(`/order/${order._id}`);\n          dispatch({ type: ORDER_CREATE_RESET });\n        }\n      }, [dispatch, order, props.history, success]);\n\n    return (\n        <div>\n            <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n            <div className=\"row top\">\n                <div className=\"col-2\">\n                    <ul>\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Shipping</h2>\n                                <p>\n                                    <strong>Name:</strong>{cart.shippingAddress.fullName} <br/>\n                                    <strong>Address:</strong>{cart.shippingAddress.address},\n                                    {cart.shippingAddress.city}, {cart.shippingAddress.postalCode}\n                                    ,{cart.shippingAddress.country}\n                                </p>\n                            </div>\n                        </li>\n\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Payment method</h2>\n                                <p>\n                                    <strong>Method:</strong>{cart.paymentMethod} \n                                </p>\n                            </div>\n                        </li>\n\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Order Items</h2>\n                                   <ul>\n                                        {cart.cartItems.map((item) => (\n                                            <li key={item.product}>\n                                                <div className=\"row\">\n\n                                                    <div>\n                                                        <img \n                                                           src={item.image} \n                                                           alt={item.name} \n                                                           className=\"small\"></img>\n                                                    </div>\n                                                    <div className=\"min-30\">\n                                                        <Link to={`/product/${item.product}`}>\n                                                            {item.name}\n                                                            </Link>\n                                                    </div>\n                                                    \n                                                    <div>\n                                                        {item.qty} x  ${item.price} = ${item.qty * item.price}\n                                                    </div>\n                                                </div>\n\n                                            </li>\n                                        ))\n                                        }\n                                 </ul> \n\n                                \n                            </div>\n                        </li>\n                    </ul>\n                </div>\n\n                <div className=\"col-1\">\n                    <div className=\"card card-body\">\n                        <ul>\n                            <li>\n                                <h2>Order Summery</h2>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Items</div>\n                                    <div>${cart.itemsPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>Shipping</div>\n                                    <div>${cart.shippingPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>Tax</div>\n                                    <div>${cart.taxPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                        <strong>Order Total</strong>\n                                    </div>\n                                    <div><strong>${cart.totalPrice.toFixed(2)}</strong></div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <button \n                                type=\"button\" \n                                onClick={placeOrderHandler}\n                                className=\"primary block\"\n                                disabled={cart.cartItems.length === 0}\n                                >\n                                    Place Order\n                                </button>\n                            </li>\n                            {loading && <LoadingBox></LoadingBox>}\n                            {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}