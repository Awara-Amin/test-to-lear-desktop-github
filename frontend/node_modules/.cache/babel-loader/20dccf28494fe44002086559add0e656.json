{"ast":null,"code":"var _jsxFileName = \"/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\"; // import { applyCoupon } from \"../actions/userActions\";\n\nimport { listCoupons } from \"../actions/couponActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PlaceOrderScreen(props) {\n  _s();\n\n  const cart = useSelector(state => state.cart);\n  const [coupon, setCoupon] = useState(\"\");\n  console.log(\"inside placeOrder kaka\");\n  console.log(cart); // first check if the payment method has been choosen or not\n\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n\n  const orderCreate = useSelector(state => state.orderCreate);\n  const {\n    loading,\n    success,\n    error,\n    order\n  } = orderCreate;\n  const couponList = useSelector(state => state.couponList);\n  const {\n    loading: loaddingCoupon,\n    error: errorCoupon,\n    coupons\n  } = couponList;\n  console.log(\"what is this kaka\");\n  console.log(coupons);\n  console.log(\"this is coupon name \", coupon);\n  console.log(typeof coupon); //   console.log(error);\n\n  const toPrice = num => Number(num.toFixed(2)); // to round the number 5.123 =>\"5.12\" => 5.12\n\n\n  cart.itemsPrice = toPrice(cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0));\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // console.log(\"see you in the next session\")\n    // all items of cart and changing cartItems name to orederItems\n    dispatch(createOrder({ ...cart,\n      orderItems: cart.cartItems\n    }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({\n        type: ORDER_CREATE_RESET\n      });\n      dispatch(listCoupons({}));\n    }\n  }, [dispatch, order, props.history, success]);\n\n  const deleteFileHandler = async fileName => {\n    setImages(images.filter(x => x !== fileName));\n    console.log(\"hi\");\n  };\n\n  const couponHandler = () => {\n    // console.log(\"send coupon to backend kaka \");\n    const disX = coupons.filter(x => x.name === setCoupon);\n    console.log(disX);\n  }; // applyCo;pon(coupon).then((res) => {\n  //   console.log(\"RES ON COUPON APPLIED\", res.data);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CheckoutSteps, {\n      step1: true,\n      step2: true,\n      step3: true,\n      step4: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 19\n                }, this), cart.shippingAddress.fullName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 51\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Address:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 19\n                }, this), cart.shippingAddress.address, \",\", cart.shippingAddress.city, \",\", \" \", cart.shippingAddress.postalCode, \",\", cart.shippingAddress.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Payment method\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Method:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 19\n                }, this), cart.paymentMethod]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: cart.cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.image,\n                        alt: item.name,\n                        className: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 114,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"min-30\",\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/product/${item.product}`,\n                        children: item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 121,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 120,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [item.qty, \" x $\", item.price, \" = $\", item.qty * item.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 23\n                  }, this)\n                }, item.product, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Summery\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Have you got our coupon?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: e => setCoupon(e.target.value.toString()),\n                  value: coupon,\n                  type: \"text\",\n                  className: \"form-control\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: couponHandler,\n                  className: \"btn btn-primary mt-2\",\n                  children: \"Apply\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.itemsPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.shippingPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Tax\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", cart.taxPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Order Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"$\", cart.totalPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: placeOrderHandler,\n                className: \"primary block\",\n                disabled: cart.cartItems.length === 0,\n                children: \"Place Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), loading && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 27\n            }, this), error && /*#__PURE__*/_jsxDEV(MessageBox, {\n              variant: \"danger\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PlaceOrderScreen, \"Sv1FBq3O9p9HCYrLL/CpxwGXpt8=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = PlaceOrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceOrderScreen\");","map":{"version":3,"sources":["/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","listCoupons","PlaceOrderScreen","props","cart","state","coupon","setCoupon","console","log","paymentMethod","history","push","orderCreate","loading","success","error","order","couponList","loaddingCoupon","errorCoupon","coupons","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","deleteFileHandler","fileName","setImages","images","filter","x","couponHandler","disX","name","shippingAddress","fullName","address","city","postalCode","country","map","item","image","product","e","target","value","toString","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrder } from \"../actions/orderActions\";\nimport CheckoutSteps from \"../components/CheckoutSteps\";\nimport { ORDER_CREATE_RESET } from \"../constants/orderConstants\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\n// import { applyCoupon } from \"../actions/userActions\";\nimport { listCoupons } from \"../actions/couponActions\";\n\nexport default function PlaceOrderScreen(props) {\n  const cart = useSelector((state) => state.cart);\n  const [coupon, setCoupon] = useState(\"\");\n  console.log(\"inside placeOrder kaka\");\n  console.log(cart);\n\n  // first check if the payment method has been choosen or not\n  if (!cart.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n\n  const orderCreate = useSelector((state) => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n\n  const couponList = useSelector((state) => state.couponList);\n  const { loading: loaddingCoupon, error: errorCoupon, coupons } = couponList;\n  console.log(\"what is this kaka\");\n  console.log(coupons);\n  console.log(\"this is coupon name \", coupon);\n  console.log(typeof coupon);\n\n  //   console.log(error);\n\n  const toPrice = (num) => Number(num.toFixed(2)); // to round the number 5.123 =>\"5.12\" => 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // console.log(\"see you in the next session\")\n    // all items of cart and changing cartItems name to orederItems\n    dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({ type: ORDER_CREATE_RESET });\n      dispatch(listCoupons({}));\n    }\n  }, [dispatch, order, props.history, success]);\n\n  const deleteFileHandler = async (fileName) => {\n    setImages(images.filter((x) => x !== fileName));\n    console.log(\"hi\");\n  };\n  const couponHandler = () => {\n    // console.log(\"send coupon to backend kaka \");\n    const disX = coupons.filter((x) => x.name === setCoupon);\n    console.log(disX);\n  };\n\n  // applyCo;pon(coupon).then((res) => {\n  //   console.log(\"RES ON COUPON APPLIED\", res.data);\n\n  return (\n    <div>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"row top\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Shipping</h2>\n                <p>\n                  <strong>Name:</strong>\n                  {cart.shippingAddress.fullName} <br />\n                  <strong>Address:</strong>\n                  {cart.shippingAddress.address},{cart.shippingAddress.city},{\" \"}\n                  {cart.shippingAddress.postalCode},\n                  {cart.shippingAddress.country}\n                </p>\n              </div>\n            </li>\n\n            <li>\n              <div className=\"card card-body\">\n                <h2>Payment method</h2>\n                <p>\n                  <strong>Method:</strong>\n                  {cart.paymentMethod}\n                </p>\n              </div>\n            </li>\n\n            <li>\n              <div className=\"card card-body\">\n                <h2>Order Items</h2>\n                <ul>\n                  {cart.cartItems.map((item) => (\n                    <li key={item.product}>\n                      <div className=\"row\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/product/${item.product}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n\n                        <div>\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>Order Summery</h2>\n              </li>\n              <li>\n                <h4>Have you got our coupon?</h4>\n                <>\n                  <input\n                    onChange={(e) => setCoupon(e.target.value.toString())}\n                    value={coupon}\n                    type=\"text\"\n                    className=\"form-control\"\n                  ></input>\n                  <button\n                    onClick={couponHandler}\n                    className=\"btn btn-primary mt-2\"\n                  >\n                    Apply\n                  </button>\n                </>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Items</div>\n                  <div>${cart.itemsPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>Shipping</div>\n                  <div>${cart.shippingPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>Tax</div>\n                  <div>${cart.taxPrice.toFixed(2)}</div>\n                </div>\n              </li>\n\n              <li>\n                <div className=\"row\">\n                  <div>\n                    <strong>Order Total</strong>\n                  </div>\n                  <div>\n                    <strong>${cart.totalPrice.toFixed(2)}</strong>\n                  </div>\n                </div>\n              </li>\n\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={placeOrderHandler}\n                  className=\"primary block\"\n                  disabled={cart.cartItems.length === 0}\n                >\n                  Place Order\n                </button>\n              </li>\n              {loading && <LoadingBox></LoadingBox>}\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}