{"ast":null,"code":"var _jsxFileName = \"/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/OrderScreen.js\";\n// import  Axios  from 'axios';\nimport React, { useEffect } from 'react'; // import { PayPalButton } from \"react-paypal-button-v2\";\n// import PaypalButton from 'react-paypal-button-v2'\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from \"react-router-dom\"; // import { deliverOrder, detailsOrder, payOrder, pendingOrder } from '../actions/orderActions';\n\nimport { deliverOrder, detailsOrder, pendingOrder } from '../actions/orderActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox'; // import { ORDER_DELIVER_RESET, ORDER_PAY_RESET, ORDER_PENDING_RESET } from '../constants/orderConstants';\n\nimport { ORDER_DELIVER_RESET, ORDER_PENDING_RESET } from '../constants/orderConstants';\nexport default function OrderScreen(props) {\n  var _this = this;\n\n  var orderId = props.match.params.id; // const [sdkReady, setSdkReady] = useState(false);\n\n  var orderDetails = useSelector(function (state) {\n    return state.orderDetails;\n  });\n  var order = orderDetails.order,\n      loading = orderDetails.loading,\n      error = orderDetails.error;\n  var userSignin = useSelector(function (state) {\n    return state.userSignin;\n  });\n  var userInfo = userSignin.userInfo; // const orderPay = useSelector((state) => state.orderPay);\n  // const {\n  //     loading: loadingPay, \n  //     error: errorPay, \n  //     success: successPay} = orderPay;\n\n  var orderPending = useSelector(function (state) {\n    return state.orderPending;\n  });\n  var loadingPending = orderPending.loading,\n      errorPending = orderPending.error,\n      successPending = orderPending.success;\n  var orderDeliver = useSelector(function (state) {\n    return state.orderDeliver;\n  });\n  var loadingDeliver = orderDeliver.loading,\n      errorDeliver = orderDeliver.error,\n      successDeliver = orderDeliver.success;\n  var dispatch = useDispatch();\n  useEffect(function () {\n    // const addPayPalScript = async () => {\n    //     const {data} = await Axios.get('/api/config/paypal');\n    //     const script = document.createElement('script');\n    //     script.type=\"text/javascript\";\n    //     script.src=`https://www.paypal.com/sdk/js?client-id=${data}`;\n    //     script.async = true;\n    //     script.onload = () => {\n    //         setSdkReady(true);\n    //     };\n    //     document.body.appendChild(script);\n    // };\n    if (!order || successPending || successDeliver || order && order._id !== orderId) {\n      dispatch({\n        type: ORDER_PENDING_RESET\n      });\n      dispatch({\n        type: ORDER_DELIVER_RESET\n      });\n      dispatch(detailsOrder(orderId));\n    } // else { \n    //     if(!order.isPaid){\n    //         if(!window.paypal) {\n    //             addPayPalScript();\n    //         } else {\n    //             setSdkReady(true);\n    //         }\n    //     }\n    // }\n\n  }, [dispatch, orderId, order, successPending, successDeliver]); // const successPaymentHandler = (paymentResult) => {\n  // dispatch(payOrder(order, paymentResult));\n  // dispatch(pendingOrder(order, paymentResult));\n  // };\n\n  var successPaymentHandler = function successPaymentHandler() {\n    // dispatch(payOrder(order, paymentResult));\n    dispatch(pendingOrder(order));\n  };\n\n  var deliveHandler = function deliveHandler() {\n    dispatch(deliverOrder(order._id));\n  };\n\n  return loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 24\n    }\n  }, error) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 10\n    }\n  }, \"Order \", order._id), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }\n  }, \"Name: \"), order.shippingAddress.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 93\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 37\n    }\n  }, \"Address: \"), order.shippingAddress.address, \",\", order.shippingAddress.city, \", \", ' ', order.shippingAddress.postalCode, \",\", order.shippingAddress.country), order.isDelivered ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, \"Delivered at \", order.deliveredAt.substring(0, 10)) : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 36\n    }\n  }, \"Not Delivered Yet Sir\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, \"Payment\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }, \"Method:\"), order.paymentMethod), order.isPending ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, \"Paid at \", order.pendingAt.substring(0, 10)) : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 34\n    }\n  }, \"But Not Paid Yet\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 33\n    }\n  }, \"Order Items\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }, order.orderItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: item.product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.image,\n      alt: item.name,\n      className: \"small\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"min-30\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.product),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 53\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 49\n      }\n    }, item.qty, \" x  $\", item.price, \" = $\", item.qty * item.price)));\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, \"Order Summery\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 37\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 37\n    }\n  }, \"$\", order.itemsPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 37\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  }, \"$\", order.shippingPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 37\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 37\n    }\n  }, \"$\", order.taxPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 41\n    }\n  }, \"Order Total\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 42\n    }\n  }, \"$\", order.totalPrice)))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"primary block\",\n    onClick: successPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 29\n    }\n  }, \"Make it pending\"), userInfo.isAdmin && !order.isPaid && order.isDelivered && /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 33\n    }\n  }, loadingDeliver && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 56\n    }\n  }), errorDeliver && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 55\n    }\n  }, errorDeliver), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"primary block\",\n    onClick: deliveHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 37\n    }\n  }, \"Deliver Order\")))))));\n}","map":{"version":3,"sources":["/Users/awaraamin/2020/The-complete-2020-Web-Development-Bootcamp/practice/bootStarp-amazona/amazona/frontend/src/screens/OrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","deliverOrder","detailsOrder","pendingOrder","LoadingBox","MessageBox","ORDER_DELIVER_RESET","ORDER_PENDING_RESET","OrderScreen","props","orderId","match","params","id","orderDetails","state","order","loading","error","userSignin","userInfo","orderPending","loadingPending","errorPending","successPending","success","orderDeliver","loadingDeliver","errorDeliver","successDeliver","dispatch","_id","type","successPaymentHandler","deliveHandler","shippingAddress","fullName","address","city","postalCode","country","isDelivered","deliveredAt","substring","paymentMethod","isPending","pendingAt","orderItems","map","item","product","image","name","qty","price","itemsPrice","toFixed","shippingPrice","taxPrice","totalPrice","isAdmin","isPaid"],"mappings":"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","sourcesContent":["// import  Axios  from 'axios';\nimport React, {useEffect} from 'react';\n// import { PayPalButton } from \"react-paypal-button-v2\";\n// import PaypalButton from 'react-paypal-button-v2'\nimport {useDispatch, useSelector} from 'react-redux';\nimport {Link} from \"react-router-dom\";\n// import { deliverOrder, detailsOrder, payOrder, pendingOrder } from '../actions/orderActions';\nimport { deliverOrder, detailsOrder, pendingOrder } from '../actions/orderActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n// import { ORDER_DELIVER_RESET, ORDER_PAY_RESET, ORDER_PENDING_RESET } from '../constants/orderConstants';\nimport { ORDER_DELIVER_RESET, ORDER_PENDING_RESET } from '../constants/orderConstants';\n\nexport default function OrderScreen(props) {\n    const orderId = props.match.params.id;\n    // const [sdkReady, setSdkReady] = useState(false);\n    \n    const orderDetails = useSelector((state) => state.orderDetails);\n    const {order, loading, error} = orderDetails;\n\n    const userSignin = useSelector((state) => state.userSignin);\n    const {userInfo} = userSignin;\n\n\n    \n    // const orderPay = useSelector((state) => state.orderPay);\n    // const {\n    //     loading: loadingPay, \n    //     error: errorPay, \n    //     success: successPay} = orderPay;\n\n    const orderPending = useSelector((state) => state.orderPending);\n        const {\n            loading: loadingPending, \n            error: errorPending, \n            success: successPending} = orderPending;\n\n\n    const orderDeliver = useSelector((state) => state.orderDeliver);\n    const {\n        loading: loadingDeliver, \n        error: errorDeliver, \n        success: successDeliver} = orderDeliver;\n    \n\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        // const addPayPalScript = async () => {\n        //     const {data} = await Axios.get('/api/config/paypal');\n        //     const script = document.createElement('script');\n        //     script.type=\"text/javascript\";\n        //     script.src=`https://www.paypal.com/sdk/js?client-id=${data}`;\n        //     script.async = true;\n        //     script.onload = () => {\n        //         setSdkReady(true);\n        //     };\n        //     document.body.appendChild(script);\n        // };\n        if(!order || successPending || successDeliver|| (order && order._id !== orderId)) {\n            dispatch({type: ORDER_PENDING_RESET})\n            dispatch({type: ORDER_DELIVER_RESET})\n            dispatch(detailsOrder(orderId));\n        } \n        // else { \n        //     if(!order.isPaid){\n        //         if(!window.paypal) {\n        //             addPayPalScript();\n        //         } else {\n        //             setSdkReady(true);\n        //         }\n        //     }\n        // }\n        \n    }, [dispatch, orderId, order, successPending, successDeliver]);\n\n    // const successPaymentHandler = (paymentResult) => {\n        // dispatch(payOrder(order, paymentResult));\n        // dispatch(pendingOrder(order, paymentResult));\n        \n    // };\n\n    const successPaymentHandler = () => {\n        // dispatch(payOrder(order, paymentResult));\n        dispatch(pendingOrder(order));\n        \n    };\n\n\n    const deliveHandler = () => {\n        dispatch(deliverOrder(order._id))\n    }\n    return loading ? (\n          <LoadingBox></LoadingBox>\n          ) : error ? (<MessageBox variant=\"danger\">{error}</MessageBox>)\n          : (\n      <div>\n         <h1>Order {order._id}</h1>\n            <div className=\"row top\">\n                <div className=\"col-2\">\n                    <ul>\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Shipping</h2>\n                                <p>\n                                    <strong>Name: </strong>{order.shippingAddress.fullName} <br/>\n                                    <strong>Address: </strong>{order.shippingAddress.address},\n                                    {order.shippingAddress.city}, {' '}\n                                    {order.shippingAddress.postalCode}\n                                    ,{order.shippingAddress.country}\n                                </p>\n                                {order.isDelivered? (\n                                <MessageBox variant=\"success\">\n                                    Delivered at {order.deliveredAt.substring(0,10)}\n                                    </MessageBox>\n                                ) : (\n                                   <MessageBox variant=\"danger\">Not Delivered Yet Sir</MessageBox>)\n\n                                }\n                            </div>\n                        </li>\n\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Payment</h2>\n                                <p>\n                                    <strong>Method:</strong>{order.paymentMethod} \n                                </p>\n                                {order.isPending? (\n                                <MessageBox variant=\"success\">\n                                    Paid at {order.pendingAt.substring(0,10)}\n                                    </MessageBox>\n                                ) : \n                                (<MessageBox variant=\"danger\">But Not Paid Yet</MessageBox>)\n\n                                }\n                            </div>\n                        </li>\n\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Order Items</h2>\n                                <ul>\n                                    {order.orderItems.map((item) =>(\n                                        <li key={item.product}>\n                                            <div className=\"row\">\n\n                                                <div>\n                                                    <img \n                                                      src={item.image} \n                                                      alt={item.name} \n                                                      className=\"small\"\n                                                    ></img>\n                                                </div>\n                                                <div className=\"min-30\">\n                                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                                </div>\n                                                \n                                                <div>\n                                                    {item.qty} x  ${item.price} = ${item.qty * item.price}\n                                                </div>\n                                            </div>\n                                        </li>\n                                    ))\n                                    }\n                                 </ul> \n\n                                \n                            </div>\n                        </li>\n                    </ul>\n                </div>\n\n                <div className=\"col-1\">\n                    <div className=\"card card-body\">\n                        <ul>\n                            <li>\n                                <h2>Order Summery</h2>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Items</div>\n                                    <div>${order.itemsPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>Shipping</div>\n                                    <div>${order.shippingPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>Tax</div>\n                                    <div>${order.taxPrice.toFixed(2)}</div>\n                                </div>                       \n                            </li>\n\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                        <strong>Order Total</strong>\n                                    </div>\n                                    <div><strong>${order.totalPrice}</strong></div>\n                                </div>                       \n                            </li>\n                            {/* {!order.isPaid && (\n                                    <li>\n                                        {!sdkReady ? (\n                                        <LoadingBox></LoadingBox>\n                                        ) : (\n                                            <>\n                                            {errorPay && ( \n                                                <MessageBox variant=\"danger\">{errorPay}</MessageBox>\n                                            )}\n                                            {loadingPay && <LoadingBox></LoadingBox>}\n\n                                            <PayPalButton \n                                            amount={order.totalPrice}\n                                            onSuccess={successPaymentHandler}\n                                            ></PayPalButton>\n                                            </>\n                                        )}\n                                    </li>\n                                )\n                            } */}\n\n                            <button \n                            type=\"button\" \n                            className= \"primary block\"\n                            onClick={successPaymentHandler}\n                            >Make it pending\n                            </button>\n\n                            {/* {userInfo.isAdmin && order.isPaid && !order.isDelivered && ( */}\n                            {userInfo.isAdmin && !order.isPaid && order.isDelivered && (\n                                <li>\n                                    {loadingDeliver && <LoadingBox></LoadingBox>}\n                                    {errorDeliver && (<MessageBox variant=\"danger\">{errorDeliver}</MessageBox>)}\n                                    \n                                    <button type=\"button\" className= \"primary block\" onClick={deliveHandler}>\n                                        Deliver Order\n\n                                    </button>\n                                </li>\n                            )}\n\n                        </ul>\n                    </div>\n\n\n                </div>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}